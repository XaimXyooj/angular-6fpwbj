<ng-container *ngTemplateOutlet="grid; context:{ rows: rows | async, keys: columns | async }"></ng-container>
<ng-container *ngTemplateOutlet="pagination; context:{ items: data | async }"></ng-container>

<ng-template #grid let-keys="keys" let-rows="rows">
	<form [ngStyle]="{ 'min-height': itemsPerPage * 25 + 'px' }" [formGroup]="rowSelectForm">
		<table>
			<tr *ngIf="showHeader">
				<th *ngIf="select !== SELECT_MODE.NONE" class="narrow">
					<input *ngIf="select === SELECT_MODE.MULTI" type="checkbox" formControlName="headerSelect">
					<input *ngIf="select === SELECT_MODE.SINGLE" type="radio" formControlName="headerSelect">
        </th>
				<th *ngFor="let key of keys; index as i" [ngClass]="{ 'narrow': showNumber && i === 0 }">
					{{ key }}
				</th>
			</tr>
			<tr *ngFor="let row of rows">
				<td *ngIf="select !== SELECT_MODE.NONE" class="narrow">
					<input *ngIf="select === SELECT_MODE.MULTI" [id]="row.id" type="checkbox" [formControlName]="row.id">
					<input *ngIf="select === SELECT_MODE.SINGLE" [id]="row.id" type="radio" [formControlName]="row.id">
        </td>
				<td *ngFor="let key of keys; index as i" [ngClass]="{ 'narrow': showNumber && i === 0 }">
					<label [for]="row.id">
            {{ row[key] }}
					</label>
				</td>
			</tr>
		</table>
	</form>
</ng-template>

<ng-template #pagination let-count="items?.length">
	<pager *ngIf="showPager" [itemCount]="count" [page]="currentPage" [size]="itemsPerPage"
		(update)="pageUpdated($event)"></pager>
</ng-template>